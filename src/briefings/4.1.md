# 4.1. Loading states

## Introduction

Nowadays [loading skeletons](https://uxdesign.cc/what-you-should-know-about-skeleton-screens-a820c45a571a) are everywhere to inform the user that the page or some part of it is being loaded.

These are perceivable visually but the same ain't true for the people with vision impairmen, or those who use a screen reader.

ARIA Live Regions fill this gap helping to expose this dynamic content. There are two tipes:

- `aria-live="assertive"` or `role="alert"`: The content is announced immediately when added to the DOM.

```html
<p aria-live="assertive">The credentials are incorrect.</p>
```

- `aria-live="polite"` or `role="status"`: The content is announced when there's nothing else to be announced. Use it when this does not influence the user main task.

```html
<p aria-live="polite">Playing now: "Pink Floyd - Time"</p>
```

Here's a [codepen example](https://codepen.io/vloux/details/jxPrWy) exploring multiple ways of using `aria-live`. In this exercise, the code is ready to follow the approach #3.

## Exercise

In the exercise page,
there is a dummy search mechanism that loads a set of results.

Visually, it's perceivable when the result is being loaded and when it's finished. But what about people using screen readers. How can we do it?

**üéØ Goal:** Improve the accessibility of the loading state for people with visual impairments.

- Exercise: [Default](../exercises/4.1.html) or [React](../exercises/4.1.react.html)
- Solution: [Default](../solutions/4.1.html) or [React](../solutions/4.1.react.html)

<details>
<summary>üçÄ Toggle hint #1:</summary>

The designs don't include a visual message when the loading is finished...
Remember `.sr-only`? It's the perfect time to use it!

</details>

</details>

## Bonus #1

Using the cursor, you may have noticed that a tooltip is shown on button hover. Now, try to do the same using the keyboard only.

That's not possilbe because the button is disabled using `disabled` attribute. How can we solve this? Prevent the click interaction, but still allowing the focus interaction.

<details>
<summary>üçÄ Toggle hint #1:</summary>
There is an attribute `aria-disabled="true"` that we can use.

Semantically it marks the button as disabled, but it does not change the behavior. In other words, you can still focus it using the keyboard.

</details>

<details>
<summary>üçÄ Toggle hint #2:</summary>
ARIA only purpose is to add extra semantics to an element. It never, _ever_ changes the styles or behavior of that element.

That means, you need to manually prevent the click and change the CSS styles when that attribute is presented.

</details>

## Further reading

- [More accessible loading skeletons](https://adrianroselli.com/2020/11/more-accessible-skeletons.html)
- [Aria Practices](https://github.com/w3c/aria-practices/issues)
- [Making disabled Buttons more inclusive](TODO-LINK-CSS) (to be published soon)

### WCAG Success Criterion

- [WCAG 2.4.8 Location - Level AAA](https://www.w3.org/TR/WCAG21/#location)
- [WCAG 3.2.1 Predictable On Focus - Level A](https://www.w3.org/TR/WCAG21/#on-focus)
- [WCAG 3.2.2 Predictable On Input - Level A](https://www.w3.org/TR/WCAG21/#on-input)
- [WCAG 4.1.3 Status Messages - Level AA](https://www.w3.org/TR/WCAG21/#status-messages)
